{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rocket Basket | OrderHistory</title>
    <link rel="stylesheet" href="{% static 'css/order_history.css' %}">

</head>
<body>
<header class="header">
    <div class="header-content">

        <h1>
            <b>Rocket Basket: Shop Fast, Ship Faster - Order History</b> <img src="{% static 'img/Rockettt.png' %}" alt="RocketLogo" class="oh_icon">
            <img src="{% static 'img/basket.png' %}" alt="BasketLogo" class="oh_icon">
            <img id="myImage" src="{% static 'img/account_icon.png' %}" alt="Image"  class="profile-icon">
        </h1>

    {% comment %}made the pop up inheritable to reduce redundancy {% endcomment %}
    {% include 'inheritables/popup.html' %}
    </div>
</header>
<div class="container">
    <h2>Order History</h2>
    <table>
        <tr>
            <th>ORDER #</th>
            <th>PRODUCT NAME</th>
            <th>QUANTITY</th>
            <th>TOTAL AMOUNT</th>
            <th>DATE PURCHASED</th>
            <th>STATUS</th>
            <th>OPINION?</th>
            <th>CHAT SELLER</th>
        </tr>
       {% for order in order_history %}
    <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.ProductID.ProductName }}</td>
        <td>{{ order.QuantityPerProduct }}</td>
        <td>{{ order.TransactionID.TotalPrice }}</td>
        <td>{{ order.DatePurchased }}</td>
        <td id="status-{{ order.id }}" class="{{ order.TransactionID.get_status_display|slugify }}">
            {% if order.TransactionID.get_status_display == "Delivered" %}
                <h4 class="status-delivered delivered">Delivered</h4>
            {% elif order.TransactionID.get_status_display == "About to Deliver" %}
                <h4 class="status-about-to-deliver about-to-deliver">About to Deliver</h4>
            {% elif order.TransactionID.get_status_display == "Departed from Sort Center" %}
                <h4 class="status-departed departed-from-sort-center">Departed from Sort Center</h4>
            {% elif order.TransactionID.get_status_display == "Arrived at Sort Center" %}
                <h4 class="status-arrived arrived-at-sort-center">Arrived at Sort Center</h4>
            {% elif order.TransactionID.get_status_display == "Package Picked Up" %}
                <h4 class="status-picked-up package-picked-up">Package Picked Up</h4>
            {% else %}
                <h4 class="status-packed packed-and-ready-to-ship">Packed and Ready to Ship</h4>
            {% endif %}
        </td>
        <td>
            <a href="{% url 'products:review_product' order.ProductID.ProductID %}">
                {% if order.has_rated %}
                    <img src="{% static 'img/heart.png' %}" alt="Heart" class="oh_icon">
                {% else %}
                    <img src="{% static 'img/leave_a_heart.png' %}" alt="Heart" class="oh_icon">
                {% endif %}
            </a>
        </td>
        <td>
            <a href="{% url 'accounts:login' %}"><img src="{% static 'img/chat.png' %}" alt="login" class="oh_icon"></a>
        </td>
    </tr>
{% endfor %}
    </table>
</div>
</body>
</html>